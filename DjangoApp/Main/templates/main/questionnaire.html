{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'styles.css'%}">
    <link rel="stylesheet" href="{% static 'styleQuestionnaire.css'%}">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <title>Document</title>
</head>

<body>
    <div class="form-container">
        <form id="form" class="form" method="post">
            {% csrf_token %}
        </form>
    </div>


   


</body>

<script type="text/javascript" src="{% static 'functionQuestionnaire.js' %}"></script>
<script type="text/javascript" src="{% static 'functiontest.js' %}"></script>


<script>
    function CreateButtonSubmit(form){
        let divButton = document.createElement("div");
        divButton.setAttribute("class","btn-container");
        form.appendChild(divButton);


        let btn = document.createElement("button");
        btn.setAttribute("class","btn-submit");
        btn.setAttribute("name","jsonUpload");
        btn.setAttribute("value","");
        btn.innerHTML = "Valider";
        divButton.appendChild(btn);
    }

    function ReadJSON(){
        let json = JSON.parse("{{jsonfile|escapejs}}");
        let QCM = json.QCM;
        let length = Object.keys(QCM).length;

        
        for (let i=1; i < length+1; i++){
            let question = QCM[i];
            let Type = question.type;
            eval(Type)(question,document.getElementById("form"),i);
        }
        CreateButtonSubmit(document.getElementById("form"));
    }
    ReadJSON();
    
</script>
</html>